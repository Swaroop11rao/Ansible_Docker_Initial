  - name: Add Docker GPG key
    apt_key: 'url={{ubuntu_docker_gpg_key}}'

  - name: Add Docker APT repository
    apt_repository:
      repo: 'deb [arch=amd64] {{ubuntu_docker_repo}} {{ansible_distribution_release}} stable'

  - name: Install list of packages
    apt:
      name: '{{ubuntu_docker_packages}}'
      state: present
      update_cache: yes    
   
  - name: Ensure docker-compose is installed and available
    get_url: 
      url : '{{ubuntu_docker_compose_url}}-{{ ansible_system }}-{{ ansible_userspace_architecture }}'
      dest: '{{docker_compose_location}}'
      mode: '{{docker_compose_get_mode}}'


  - name: Create Docker group
    group:
     name: '{{docker_group}}'
     state: present
  
  - name: Add user to docker group
    user:
     name: '{{docker_user}}'
     groups: '{{docker_group}}'
     append: yes
 

